function formatNumber(e,t){var a="";if(null!=e){a=e.toString(),blockCount=Math.floor((a.length-1)/3);for(var n=0;n<blockCount;n++)a=a.slice(0,a.length-3*(n+1)-n)+" "+a.slice(a.length-3*(n+1)-n);0!=e&&null!=t?a=t+a+",-":a+=",-"}return a}function formatPercent(e){var t="";return null!=e&&((t=Math.abs(e).toString()).replace(".",","),t=(e>0?"-":"+")+t+" %"),t}function calculate(){var e=$("#dane-akt-hruba-in"),t=$("#dane-akt-deti"),a=$("#dane-akt-student"),n=$("#dane-akt-superhruba"),o=$("#dane-akt-socialni"),r=$("#dane-akt-zdravotni"),i=$("#dane-akt-hruba"),c=$("#dane-akt-socialni-obc"),l=$("#dane-akt-zdravotni-obc"),s=$("#dane-akt-dan"),d=$("#dane-akt-solidarni"),u=$("#dane-akt-slevy"),h=$("#dane-akt-bonus"),p=$("#dane-akt-cista"),f=$("#dane-akt-efektivni"),m=$("#dane-pir-hruba"),v=$("#dane-pir-dan"),g=$("#dane-pir-slevy"),k=$("#dane-pir-bonus"),b=$("#dane-pir-cista"),_=$("#dane-pir-efektivni"),x=$("#dane-rozdil"),w=e.val(),C=t.val();null==C&&(C=0);var N=a.is(":checked");if(null!=w&&w>=11e3){w=Math.ceil(w),C=Math.ceil(C);var E=Math.ceil(.25*w);E>28232&&(E=28232);var y=Math.ceil(.09*w),M=w+E+y,T=0,z=w;z>112928&&(z=112928,T=Math.ceil(.07*(w-112928)));var j=Math.ceil(.065*z),B=Math.ceil(.045*w),I=100*Math.ceil(M/100),q=Math.ceil(.15*I),P=2070;N&&(P+=335);var S=q-P;S<0&&(S=0);for(var D=0,O=0;O<C;O++)D+=0==O?1117:1==O?1617:2017;var R=w-j-B-(S-=D)-T,U=Math.ceil(1e4*(1-R/M))/100,A=Math.ceil(.47*M),F=A-P;F<0&&(F=0);var L=M-(F-=D),H=Math.ceil(1e4*(1-L/M))/100,Q=L-R;n.text(formatNumber(M)),o.text(formatNumber(E,"+")),r.text(formatNumber(y,"+")),i.text(formatNumber(w,"")),c.text(formatNumber(j,"-")),l.text(formatNumber(B,"-")),s.text(formatNumber(q,"-")),d.text(formatNumber(T,"-")),u.text(formatNumber(P,"+")),h.text(formatNumber(D,"+")),p.text(formatNumber(R)),f.text(formatPercent(U)),m.text(formatNumber(M)),v.text(formatNumber(A,"-")),g.text(formatNumber(P,"+")),k.text(formatNumber(D,"+")),b.text(formatNumber(L)),_.text(formatPercent(H)),x.text(formatNumber(Q,Q>0?"+":"")),Q>=0?(x.hasClass("dane-result-minus")&&x.removeClass("dane-result-minus"),x.hasClass("dane-result-plus")||x.addClass("dane-result-plus")):(x.hasClass("dane-result-minus")||x.addClass("dane-result-minus"),x.hasClass("dane-result-plus")&&x.removeClass("dane-result-plus"))}else n.text(""),o.text(""),r.text(""),i.text(""),c.text(""),l.text(""),s.text(""),d.text(""),u.text(""),h.text(""),p.text(""),f.text(""),m.text(""),v.text(""),g.text(""),k.text(""),b.text(""),_.text(""),x.text("")}function calculateClick(){var e=$("#dane-akt-hruba-in").val();null!=e&&e>=11e3?($("#div-calculator").removeClass("hidden-start"),$("#div-calculator-info").removeClass("hidden-start"),$("#div-calculator-text").removeClass("hidden-start"),$("#div-chcete-vedet-vic").removeClass("hidden-start"),calculate(),$("html, body").animate({scrollTop:$("#div-calculator").offset().top},500)):$("#dane-error-in").removeClass("hidden")}Foundation.Interchange.SPECIAL_QUERIES["medium down"]="screen and (max-width: 63.9375em)",$(document).foundation(),$(document).on("replaced.zf.interchange",function(e){$(this).foundation()}),$("button[data-toggle]").on("click",function(){$(this).parent().hasClass("js-button-toggled")?$(this).parent().removeClass("js-button-toggled"):$(this).parent().addClass("js-button-toggled")}),window.onload=function(){};var choice_n_random=function(e,t){t=void 0!==t?t:3;for(var a=[];;){var n=e[Math.floor(Math.random()*e.length)];if(n.description&&(a.push(n),a.length==t))break}return a},choice_person=function(e,t,a){a=void 0!==a?a:null;var n=null;return $.each(e,function(e,o){if(o.uid==t)return n=o,void(n.role=a)}),n?[n]:(console.log("Proper profile for "+t+" not exists."),[{name:t,role:a}])},choice_garant=function(e){return choice_person(e,page_garant,"garant")},choice_leader=function(e){return choice_person(e,page_leader,"předseda")},choice_contact=function(e){return choice_person(e,page_contact,"kontaktní osoba")},show_people=function(e,t,a){if(a.length){var n=t(e);$.get(snippet_profile,function(e){var t=Handlebars.compile(e);$.each(n,function(e,n){var o=t(n);a.append(o)})},"html")}},search=function(e){$("#searchsub").click(function(){var e="https://duckduckgo.com/?q=site:pirati.cz+"+$("#search").val();window.location.href=e}),$("#search").autocomplete({source:e,select:function(e,t){window.location.href=t.item.value}})},back_top=function(){$(window).scroll(function(){$(this).scrollTop()>50?$(".scrolltop:hidden").stop(!0,!0).fadeIn():$(".scrolltop").stop(!0,!0).fadeOut()}),$(function(){$(".scroll").click(function(){return $("html,body").animate({scrollTop:$(".thetop").offset().top},"1000"),!1})})},show_relatives=function(e){var t=$("#relatives");if(t.length){var a=e[0];page_tags.length||$("#relatives-box").hide(),$.each(page_tags,function(e,n){$.each(a[n],function(e,a){if(a.url!=page_url){var n=$("<li/>").appendTo(t);$("<a/>").text(a.title).attr("href",a.url).appendTo(n)}})})}},hideEvents=function(){new Date(this.attributes[0].value)<today||showed>limit?($this=$(this),$this.hide()):showed+=1},hideOldEvents=function(){new Date;$("#boattrip").children().each(hideEvents),$("#roadtrip").children().each(hideEvents)},makemap=function(e,t){var a=e[0].settings;$(a.id).width(a.size.width),$(a.id).height(a.size.height);var n=Raphael(a.id,a.size.width,a.size.height);$("#region-description>div").hide();var o=0,r=$("#regions-list"),i=$("#regions-list-2"),c=e[0].regions;$.each(c,function(e,c){if(o<7){var l=$("<li/>").appendTo(r);$("<a/>").text(c.name).attr("href",c[t]).appendTo(l)}else{var s=$("<li/>").appendTo(i);$("<a/>").text(c.name).attr("href",c[t]).appendTo(s)}o++;var d={title:c.name},u=$.extend(a.region_attrs,d);a.colors?c.color=Raphael.getColor():c.color="#666";c.id;$.each(c.paths,function(e,o){(o=n.path(o).scale(a.size.scale,a.size.scale,0,0).attr(u))[0].onclick=function(){$(location).attr("href",c[t])},o[0].ondblclick=function(){window.open(c[t])},o[0].onmouseover=function(){o.animate({fill:c.color},500).attr({cursor:"pointer"})},o[0].onmouseout=function(){o.animate({fill:"#333"},500)}})})};$(function(){if($.get(api_search).done(search).fail(function(e){console.log("Error in search:",e)}),back_top(),hideOldEvents(),$.get(api_people).done(function(e){show_people(e,choice_n_random,$("#people")),show_people(e,choice_garant,$("#garant")),show_people(e,choice_leader,$("#leader")),page_leader!=page_contact&&show_people(e,choice_contact,$("#contact"))}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#relatives").length&&$.get(api_tags).done(function(e){show_relatives(e)}).fail(function(e){console.log("Error in relatives articles:",e)}),$("#regions-map").length){var e="url";"/volby/2017/"==page_url&&(e="kandidatka"),$.get(api_regions).done(function(t){makemap(t,e)}).fail(function(e){console.log("Error: map")})}}),$().ready(function(){$("#dane-button-calculate").on("click",calculateClick),$("#dane-akt-hruba-in").on("keyup",calculate).on("change",calculate),$("#dane-akt-deti").on("keyup",calculate).on("change",calculate),$("#dane-akt-student").on("change",calculate),$("#dane-akt-hruba-in").on("focus",function(){$(this).hasClass("hidden")||$("#dane-error-in").addClass("hidden")})}),window.twttr=function(e,t,a){var n,o=e.getElementsByTagName("script")[0],r=window.twttr||{};return e.getElementById("twitter-wjs")?r:(n=e.createElement("script"),n.id="twitter-wjs",n.src="https://platform.twitter.com/widgets.js",o.parentNode.insertBefore(n,o),r._e=[],r.ready=function(e){r._e.push(e)},r)}(document),window.fbAsyncInit=function(){FB.init({appId:"1526197851008996",xfbml:!0,version:"v2.5"})},function(e,t,a){var n,o=e.getElementsByTagName("script")[0];e.getElementById(a)||((n=e.createElement("script")).id=a,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,0,"facebook-jssdk");var _paq=_paq||[];_paq.push(["setDomains",["*.www.pirati.cz"]]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//piwik.pirati.cz/";_paq.push(["setTrackerUrl",e+"piwik.php"]),_paq.push(["setSiteId","1"]);var t=document,a=t.createElement("script"),n=t.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.defer=!0,a.src=e+"piwik.js",n.parentNode.insertBefore(a,n)}();